<html>
<head>
<title>MCL CL-HTTP Release Notes</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">

<h1><img src="/cl-http/icons/whatsnew-bang1.gif">MCL CL-HTTP Release Notes</h1>

<img src="/cl-http/icons/line-rain.gif">

<dl>

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>MCL Versions:</b>
This release runs best in the latest version of Macintosh Common Lisp
(4.2 PPC or greater). The server runs also on 68K machines under 3.3. It
works with earlier versions of MCL from 3.0 onwards, but some
functionality may be missing. If you have versions of MCL earlier than
MCL 3.0, MCL CL-HTTP will not be suitable for production use but will
work fine for development work with single threaded clients like <a
href="http://www.einet.net/EINet/MacWeb/MacWebHome.html">MacWeb</a>. If
you encounter bugs, unclear documentation, or other shortcomings, please
report them to: <a
href="mailto:bug-mcl-cl-http@ai.mit.edu">bug-mcl-cl-http@ai.mit.edu
</a>. Since development of this server is a community effort, please try
to send fixes along with your bug reports.</p>

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Questions:</b> If you
have questions about the configuration, operation, or design of the
server, please send mail to <a
href="mailto:www-cl@ai.mit.edu">www-cl@ai.mit.edu</a>
WWW-CL@AI.MIT.EDU</a>, which you can <a
href="/cl-http.html#discussion">join</a>.

<hr>

<h2><b>Release 70.23 </b></h2>

<p><dt><img src="/cl-http/icons/orangeball.gif"><b>HTTP 1.1 Robustness:</b> A
series of bugs in HTTP 1.1 chunked transfer encoding were fixed and serveral
efficiency improvements added.</p>

<p><dt><img src="/cl-http/icons/orangeball.gif"><b>Efficiency
Improvements:</b> Numerous efficiency enhancements have been made, including
specialization of stream method, low-level connection handling, time parsing,
OpenTransport process waiting, error signalling when reading TCP buffers.</p>

<p><dt><img src="/cl-http/icons/orangeball.gif"><b>Specializations:</b> The
pathname data caching facility, server-side includes (SHTML), idle server
scavenging, and more now work under MCL.</p>

<h2><b>Release 67.99 </b></h2>

<p><dt><img src="/cl-http/icons/orangeball.gif"><b>CGI Facility:</b>
Terje Norderhaug (<a
href="mailto:terje@in-progress.com">terje@in-progress.com</a>) has
contributed a CGI facility that allows MCL CL-HTTP to benefit from the
hundreds of CGI applications written for Mac Web servers. <a
href="/cl-http/mcl/contrib/tnorderhaug/cgi/read-me.text">Read Me</a>

<p><dt><img src="/cl-http/icons/orangeball.gif"><b>Multiple Reader
Locks:</b> Performance has been improved for loaded servers using shtml
templates, passwords, or file data caching by introducing multiple
simultaneous readers of lock protected data.

<p><dt><img src="/cl-http/icons/orangeball.gif"><b>System Management
Rationalized:</b> The system loading facility has been upgraded. It
knows how to find unloaded CL-HTTP systems and perform load or compile
operations on them. System definitions and loading file now appear
exclusively under http:mcl; All MCL-specific files now reside within
this directory.  All systems have a subdirectory there that contains
their system definition.</p>

<p><dt><img src="/cl-http/icons/orangeball.gif"><b>Proxy Service:</b>
The MCL port has been upgraded to support HTTP 1.1 on the client side
and allow chunked PUTs. Consequently, the new caching proxy
implementation runs on the MAC.</p>

<p><dt><img src="/cl-http/icons/orangeball.gif"><b>Full Text Search:</b>
The Lambda-Vista system runs under MCL and has been integrated with the
mail hyperarchive.

<h2><b>Release 63.58 </b></h2>

<p><dt><img src="/cl-http/icons/orangeball.gif"><b>ESMTP Supported:</b>The
SMTP package for sending email now talks to SMTP mailers. Useful for automatic
bug reporting and the HyperArchive.

<p><dt><img src="/cl-http/icons/orangeball.gif"><b>MenuBar Control:</b>
A control item on the menubar now makes operating the server and related
tools much easier. (Courtesy Rainer Joswig).

<p><dt><img src="/cl-http/icons/orangeball.gif"><b>Dramatic Stability
Improvements:</b> Concerted efforts between Digitool and MIT have
resulted in the most stable and highest performance release for the
Power Macintosh.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>OpenTransport:</b> Native
OpenTransport networking is available for PowerPC MCL (4.1) using the Digitool
OpenTransport interface.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>TCP:</b> A TCP level bug
that could cause crashes was fixed. A timing bug on TCP-level process waits
was fixed. The default TCP timeout was lengthened to eliminate premature
connection closure with slow clients and fast servers.

<h2><b>Release 60.57</b></h2>

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Bug Fixes:</b> A number of
bugs in the MCL port have been fixed. Daily log file rotation now works.  TCP
behaves more robustly under loading.  60.57 is MCL 4.0 &amp; 3.1 ready.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>TCP Stability:</b> An
extensive upgrade of of the mactcp.lisp interface has resulted in dramatic
improvements in the stability of server running on both 68k and PowerPC
machines.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>HTTP 1.1 Compliance:</b>
The server complies with the HTTP 1.1 IETF draft standard dated July 4, 1996
for all platforms (except Lucid).  Connections are persistent for static and
dynamic resources for all content types.  Static files with content type text
are transferred using a CRLF (binary format on several architectures), which
is cached automatically. Virtual hosts are available for HTTP 1.1 clients, as
well as some late HTTP 1.0 clients (e.g., Netscape 2.0).

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>W3P Presentation
System:</b> A light-weight and fast presentation system has been integrated
with the server for use in generating form queries and parsing form returns.
W3p implements a subset of the Common Lisp Interface Manager, version 2.1. In
a later release, a Dynamic Form Processing layer will be added above W3p.
Chris Vincent Beta-Test

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Web Server
Configuration:</b> The server can be configured over the Web using W3P and a
preference facility.  This paves the way for booting binary images containing
only the server and configured them from a Web interface rather than from
Lisp.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>VRML Generation:</b> A set
of generation macros for the Virtual Reality Modeling Language support VRML
1.0.  A brief tutorial introduces Lisp programmers to generating 3 dimensional
graphics on the fly under program control. Rainer Joswig

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>W4 Constraint-Guided Web
Walker:</b> A web walker is included in the distribution, but must be loaded
separately.  It provides a constraint posting architecture control and action.
The basic HTTP client has been ported to all platforms. Persistent
connections, performance tuning, and general hardening have enhanced
usability. W4 runs on all platforms except Lucid, most robustly on the Lisp
Machine. Beta-Test. An HTML parser has been integrated as a url generator.
Alpha-Test.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Distributed AI
Applications:</b> A MIME type, Application/Lisp-SExp, has been defined to
allow Lisp programs to Post values from the basic client to the server. A
response function on the server may execute and return Lisp values to the
client. This clean facility for remote procedure call provides a foundation
for building distributed AI applications. See the example in
http:examples;client.lisp

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Put Method:</b> Netscape
Gold 3.0 clients and the basic HTTP client can use the PUT method to publish
Web documents to the server.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Client-Side Cookies:</b>
Facilities for setting and using cookies are now available. See computing
response functions.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Netscape 3.0 HTML
Generation:</b> HTML generation has been extended to support Netscape 3.0
extensions, which include HTML 3.2 tables.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Contributions
Directory:</b> A directory for general-purpose contributions by users has be
added at HTTP:CONTRIB; See also http;mcl;CONTRIB;

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Fast Access Logging:</b> A
dedicated process now handles writing access logs for each port served. This
allows threads to be reused faster because they do not wait for their log
entry to be written.  Disk contention is reduced because multiple logs are
written in sequence while keeping the log file open.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Automatic GIF Image
Sizing:</b> Netscape 1.1 & 2.0 image macros automatically default the size of
GIF images when http:*image-sizes-default-automatically* is non-null. This
speeds the display of images on major clients. Shannon Spires

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Mail Archive Facility:</b>
Archives of email discussions can be exported using the :MAIL-ARCHIVE export
type, found in http:examples;mail-archive.lisp.  This facility provides
several views on the archive, is always current, and can be extended via
subclassing. New mail formats beyond the current Lisp Machine, Eudora, UNIX
Rmail formats are easily added.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Charsets:</b> Character
sets other than the HTTP default of :ISO-8859-1 may be specified for all text
content types at export time, including directories. Similarly, dynamically
computed pages may specify alternate character sets.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Languages:</b> ISO
language abbreviations can be associated with all resources, whether static or
dynamic.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Computed Directory
Listings:</b> The standard url-oriented listing of directory paths may be
over-ridden by a computed response.  A built-in function is available to serve
index.html files instead of standard listings.

<h2><b>Release 58.12</b></h2>

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Inline Speech:</b>
Support is available for inline speech synthesis using a Netscape
plug-in and the Macintalk. See discussion on the <a
href="/cl-http/features.html">features page</a>.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>JavaScript
Emission:</b> HTML generation macros incorporate client-side events.
Events are handled by client-side code. <a
href="/cl-http/show-documentation?NS2.0:DEFINE-SCRIPT">ns2.0:define-script</a>
provides a facility for encapsulating mobile code and emitting it from
lisp during HTML generation with <a
href="/cl-http/show-documentation?HTML:ACCEPT-INPUT">html:accept-input</a>,
<a
href="/cl-http/show-documentation?HTML:WITH-EVENT-HANDLERS">html:with-event-handlers</a>,
and the simplified <a
href="/cl-http/show-documentation?HTML:FAST-FORMAT">html:fast-format</a>.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b> Persistent
Connections:</b> HTTP 1.1 persistent connections are available for exports
where the content length is known in advance.  This produces more efficient
HTTP service by reducing the overhead of tearing down and reestablishing TCP
connections for each request.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b> HTTP 1.1 Methods:</b> The
POST, PUT, and DELETE have been updated to the HTTP 1.1 specification.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b> Lower Server Latency:</b>
Server latency should be noticeably less due to the following improvements:
<ul>
		<li> More efficient header parsing.
		<li> Significantly less consing parsing headers.
		<li> Faster URL parsing.
</ul>

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b> Faster HTML
Generation:</b> Consing during HTML generation is virtually eliminated, and i
stack consed where unavoidable.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b> Access Control
Management:</b> An example file implements an access control manger over the
Web and prevents unauthorized access with digest authentication.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b> Netscape 2.0:</b> HTML
generation is now available for the range of 2.0 extensions, including frames
and client-side image maps.  Java and JavaScript can be exported and invoked
from synthesized HTML. (see the <a href="/cl-http/features.html">CL-HTTP
Features</a>.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b> Digest
Authentication:</b> The <a
href="/cl-http/authentication/authentication.html">MD5 Digest
Authentication</a> scheme is implemented.  It provides substantially better
passwords than the Basic Authentication scheme.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b> Modular Logging:</b>
Logging is now extensible. The variable <a
href="/cl-http/show-documentation?HTTP:*LOG-ACCESS-LOG-CLASS*">http:*log-access-log-class*</a>
controls the class of log used.  A variety of log formats are predefined.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>ASCII
Translation:</b> The MCL HTTP stream now translates #\Return as #\Return
#\Linefeed like other platforms. This corrects a bug with MIME multipart
transmissions, and makes text files server from the MAC more manageable
on other platforms.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Netscape Package:</b> In
preparation for the release of Netscape 2.0, the Netscape package has been
renamed to Netscape1.1 and no longer has HTML3 as a nickname.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Server Push</b> is now
implemented for the Netscape 1.1N synthesis package by <a
href="/cl-http/show-documentation?NS1.1:WITH-SERVER-PUSH-RESPONSE">ns1.1:with-server-push-response</a>.
This complements client pull which is implemented by <a
href="/cl-http/show-documentation?NS1.1:DECLARE-REFRESH-RATE">ns1.1:declare-refresh-rate</a>.
<a href="/cl-http/choose-color-scheme.html">Choose Color Schemes</a>
illustrates server push, <a
href="/cl-http/show-documentation?ns1.1:WITH-TABLE">tables</a>, and multipart
MIME generation.


<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Access Control:</b> In addition to secure subnets, the
server now supports <a href="/cl-http/authentication/authentication.html">user authentication</a> with
passwords.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Email Interface:</b> If you set <a
href="/cl-http/show-documentation?SMTP:*NETWORK-MAIL-HOST*">smtp:*network-mail-host*</a>, the
server and response functions will be able to send mail using functions like <a
href="/cl-http/show-documentation?WWW-UTILS:SEND-MAIL-FROM">www-utils:send-mail-from</a> and <a
href="/cl-http/show-documentation?WWW-UTILS:REPORT-BUG">www-utils:report-bug</a>. Best results are
obtained by providing alternate store-and-forward mailers on <a
href="/cl-http/show-documentation?SMTP:*STORE-AND-FORWARD-MAIL-HOSTS*">
smtp:*store-and-forward-mail-hosts*</a>. A simple <a href="/cl-http/find-documentation?SMTP:">SMTP
package</a> implements this mail sending facility in Lisp.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Server Interface:</b> The server now has documentation
on <a href="/cl-http/response-functions.html">how to write response functions</a>, and includes two
interface specifications for accessing server state, CL-HTTP Server Interface 1.0 and Common Gateway
Interface 1.1.

<a href="/cl-http/cgi-environment.html">Common Gateway Interface Standard 1.1.</a>. Use the macro <a
href="/cl-http/show-documentation?HTTP:WITH-CGI-ENVIRONMENT">HTTP:WITH-CGI-ENVIRONMENT</a> to
make CGI variables available in response functions or form generation functions.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Image Maps:</b> The server
now exports <a href="/cl-http/image-maps/image-maps.html">image maps</a> and
supports both the NCSA and CERN file formats.</p>

<p><dt><img src="/cl-http/icons/orangeball.gif"><b> HTML 2.0 Conformance:</b>
The server's HTML generation facility fully conforms to <a
href="/cl-http/standards/draft-html-spec-02.text">HTML 2.0</a> with the
upgrading of form processing in 0.5.0.  Please report </em>any</em> divergence
from the specification.</p>

<p><dt><img src="/cl-http/icons/orangeball.gif"><b> Netscape 1.1 HTML
Extensions:</b> The major <a
href="http://home.netscape.com/assist/net_sites/html_extensions.html">Netscape
1.1 HTML extensions</a> to HTML are implemented within the <a
href="/cl-http/find-documentation?NETSCAPE:">Netscape package</a>.  <a
href="/cl-http/show-documentation?HTTP:CURRENT-USER-AGENT">
HTTP:USER-AGENT</a> allows generation code to determine which client and
version is being served.</p>

<p><dt><img src="/cl-http/icons/orangeball.gif"><b> Local Talk Operation:</b> The
server can run in a <a href="/cl-http/configure.html#local-talk">Local Talk
Configuration</a> for standalone o network service.</p>

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Clients:</b> The server has been
tested in MCL 3.0b1 with the following MAC clients: <a
href="http://www.einet.net/EINet/MacWeb/MacWebHome.html">MacWeb 1.00A3.2</a>,
MacWeb.News 1.00A3d23d, <a
href="http://www.ncsa.uiuc.edu/SDG/Software/MacMosaic/MacMosaicHome.html">Mac
Mosaic</a> 1.0.3, <a
href="http://www.ncsa.uiuc.edu/SDG/Software/MacMosaic/MacMosaicHome.html">Mac
Mosaic</a> 2.0.0b7 without appreciable problems. UNIX <a
href="http://home.netscape.com/">Netscape</a> 1.1N works better than MAC <a
href="http://home.netscape.com/">Netscape</a> 1.1N with CL-HTTP.  <a
href="http://home.netscape.com/">Netscape</a> appears to get confused
sometimes when it gets a 304 (conditional get code indicated data not
modified).</p>

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Multithreaded Clients:</b> MAC CL-HTTP is
multithreaded in MCL 3.0, and so it can handle not just multiple simultaneous connections but
also multiple connections from a single client like <a
href="http://home.mcom.com/info/how-to-get-it.html">Netscape</a>. </p>

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>HTTP Thread Resource:</b> Listening threads and
HTTP server threads are resourced in order to reduce latency starting up threads and consing
with heavy HTTP traffic. The number of threads defaults to <a
href="/cl-http/show-documentation?HTTP:*NUMBER-OF-LISTENING-PROCESSES*">HTTP:*NUMBER-OF-LISTENING-PROCESSES*
</a>. A keyword argument to <a href="/cl-http/show-documentation?HTTP:ENABLE-HTTP-SERVICE">
HTTP:ENABLE-HTTP-SERVICE</a> overrides this default.</p>

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Improved File Transfer Rates:</b> The server
now copies both ascii and binary files to HTTP transmission streams in blocks of buffer size.,
which defaults to <a
href="/cl-http/show-documentation?HTTP:*HTTP-STREAM-BUFFER-SIZE*">HTTP:*HTTP-STREAM-BUFFER-SIZE*
</a>.</p>

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Arithmetic Operations Declared:</b>
Many arithmetic operations have been declared for faster server operation.
Keep an eye out for any missing or erroneous declarations.</p>

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Lisp Machine Source Compatibility:
</b> The current MAC version is source compatible with the Lisp Machine
version.</p>

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>MAC Export Types: </b><a
href="/cl-http/show-documentation?HTTP:EXPORT-URL">HTTP:EXPORT-URL</a> now
supports export types for a number of popular MAC file formats: :AIFF-AUDIO,
:COMPRESSED-FILE, :EXCEL-FILE, :MAC-BINARY-FILE, :PDF-FILE, :PICT-IMAGE,
:POWER-POINT-FILE, :QUICKTIME-VIDEO, :RTF-FILE, :STUFFIT-FILE, :TIFF-IMAGE,
:WAV-AUDIO, :WORD-FILE. New export types can be defined for static, file-based
data with <a
href="/cl-http/show-documentation?HTTP:DEFINE-URL-EXPORT-TYPE">HTTP:DEFINE-URL-EXPORT-TYPE</a>.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>Directory Export Types:
</b><a href="/cl-http/show-documentation?HTTP:EXPORT-URL">HTTP:EXPORT-URL</a>
now supports an extensive variety of directory exports types, including single
level and recursive exports. Additionally, :DIRECTORY will export all files
for which pathname extension to export type mappings are defined, and
recursively descend directories when :RECURSIVE-P is non-null. The variable <a
href="/cl-http/show-documentation?HTTP:*AUTO-EXPORT*">HTTP:*AUTO-EXPORT*</a>
controls whether new files added to exported directories are exported on
demand or not. Presently, URL-level security is not preserved for
auto-exporting of new subdirectories, and so, new subdirectories should rely
on manual export or global subnet security.

<p><dt><img src="/cl-http/icons/orangeball.gif"> <b>MCL 2.0.1 CLOS Method
Combination Bug:</b> A longstanding bug in CLOS method combination can cause
trouble for CL-HTTP running in MCL 2.0.1.  Digitool has provided a patch for
MCL 2.0.1 that fixes the bug (not needed for MCL 3.0). MCL 2.0.1 users should
load this patch prior to loading CL-HTTP. The patch can be found in in
http;mcl;contributions;MCL-2-0-1-kernel-patches.hqx</p>

</dl>

<p><img src="/cl-http/icons/line-rain.gif"></p>

<address><a href="http://www.ai.mit.edu/people/jcma/jcma.html">John C. Mallery</a> -- <a
href="mailto:jcma@ai.mit.edu">jcma@ai.mit.edu</a><br><a
href="http://web.mit.edu/">M.I.T.</a> <a href="http://www.ai.mit.edu/">Artificial
Intelligence Laboratory</a> </address>

</body>
</html>
